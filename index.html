<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Marleen Molenaar Collection</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <style>
    body { background:#f8f9fa; }
    .hero {
      background: linear-gradient(135deg,#6f42c1,#6610f2);
      color:white; text-align:center; padding:2rem;
      border-radius:0 0 1rem 1rem;
    }
    .card { min-height: 100%; }
    .size-badge { margin:2px; }
    .price-box { font-size:0.9rem; }
    .proof-links .card { min-height: 100%; }
  </style>
</head>
<body>

  <header class="hero">
    <h1>Marleen Molenaar Collection</h1>
    <p>Premium Children's & Ladies‚Äô Sleepwear ‚Äî Wholesale Catalogue</p>
    <div id="totals" class="fw-bold"></div>
  </header>

  <section class="container my-4">
    <h5>üßµ Size Breakdown ‚Äî Pieces Available</h5>
    <div class="row text-center" id="sizeBreakdown"></div>
  </section>

  <section class="container mb-4 proof-links">
    <div class="row g-3">
      <div class="col-md-4">
        <div class="card p-3">
          <h6>üèÜ Verified Luxury Credentials & Proof Links</h6>
          <p><a href="https://www.lanecrawford.com.hk" target="_blank">Lane Crawford Luxury Retailer</a><br>
          Hong Kong‚Äôs premier luxury department store ‚Äî equivalent to Harrods. Establishes brand positioning.</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card p-3">
          <h6>Retail Pricing Evidence</h6>
          <p><a href="https://www.retykle.com" target="_blank">Retykle Pricing Proof</a><br>
          Shows premium retail/resale pricing for individual pieces.</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card p-3">
          <h6>Media Coverage</h6>
          <p><a href="https://www.scmp.com" target="_blank">South China Morning Post</a><br>
          2006 profile: ‚Äúrunning a children‚Äôs clothing design company under her own name.‚Äù</p>
        </div>
      </div>
    </div>
  </section>

  <section class="container mb-5">
    <div class="row g-3" id="catalogue"></div>
  </section>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
  <script>
    const sizeCols = ["2","4","6","8","10","12","14"];
    const sizeTotals = {2:0,4:0,6:0,8:0,10:0,12:0,14:0};

    let inventory = [];
    let images = {};

    // Load image_map first
    Papa.parse("image_map.csv", {
      download: true,
      header: true,
      complete: function(results) {
        results.data.forEach(row => {
          if(row.image && row.name){
            images[row.name.trim().toLowerCase()] = row.image.trim();
          }
        });
        loadInventory();
      }
    });

    function loadInventory(){
      Papa.parse("detailed_inventory.csv", {
        download: true,
        header: true,
        complete: function(results){
          inventory = results.data.filter(r => r.Item_Name);
          render();
        }
      });
    }

    function render(){
      let totalPieces=0;
      let totalSkus=0;
      let cards="";

      inventory.forEach(item=>{
        let name=item.Item_Name.trim();
        let desc=item.Description || "";
        let colour=item.Colour || "";
        let qty=parseInt(item.Qty)||0;
        let rrp=parseFloat(item.Anchor_Price)||0;
        let wholesale=parseFloat(item.Discounted_Price)||0;

        // Count sizes
        let size=item.Size;
        if(size && sizeTotals[size]!==undefined){
          sizeTotals[size]+=qty;
        }

        totalPieces+=qty;
        totalSkus++;

        let img=images[name.toLowerCase()] || "images/placeholder.jpg";

        cards+=`
        <div class="col-md-3">
          <div class="card h-100">
            <img src="${img}" class="card-img-top" alt="${name}" onerror="this.src='images/placeholder.jpg'">
            <div class="card-body">
              <h5 class="card-title">${name}</h5>
              <p class="card-text">${desc}<br><strong>Colour:</strong> ${colour}</p>
              <p>
                <span class="badge bg-secondary">${size} √ó ${qty}</span>
              </p>
              <div class="price-box">
                <strong>RRP:</strong> $${rrp.toFixed(2)} AUD<br>
                <strong>Wholesale:</strong> $${wholesale.toFixed(2)} AUD
              </div>
            </div>
          </div>
        </div>`;
      });

      document.getElementById("catalogue").innerHTML=cards;

      // Totals
      document.getElementById("totals").innerHTML=
        `${totalPieces} pieces ‚Ä¢ ${totalSkus} SKUs ‚Ä¢ 50 boxes`;

      // Size Breakdown
      let sb="";
      for(let s of sizeCols){
        sb+=`<div class="col">
          <div class="card p-2">
            <h6>Size ${s}</h6>
            <p>${sizeTotals[s]} pieces</p>
          </div>
        </div>`;
      }
      document.getElementById("sizeBreakdown").innerHTML=sb;
    }
  </script>

</body>
</html>
