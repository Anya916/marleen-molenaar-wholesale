<!doctype html>
<html lang='en'>
<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width,initial-scale=1'>
  <title>Marleen Molenaar Collection ‚Äî Wholesale Catalogue</title>
  <link href='https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap' rel='stylesheet'>
  <style>
    :root{--bg:#f6f7ff;--card:#fff;--ink:#191d2a;--muted:#6a7090;--brand1:#6a44ff;--brand2:#9b73ff;--chip:#eef0ff;--chip-ink:#3d4160;--border:#e8e9f7;--shadow:0 8px 30px rgba(88,64,214,.15)}
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.5 Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    a{color:#4f3bff;text-decoration:underline}
    .wrap{max-width:1100px;margin:0 auto;padding:28px 18px 80px}
    .hero{color:#fff;margin:0;border-radius:0 0 28px 28px;padding:46px 18px 28px;background:linear-gradient(135deg,var(--brand1),var(--brand2));box-shadow:var(--shadow)}
    .hero h1{font-size:48px;line-height:1.02;margin:0 0 10px;font-weight:800;letter-spacing:-.5px}
    .pill{display:inline-block;background:rgba(255,255,255,.18);backdrop-filter:blur(6px);padding:10px 16px;border-radius:999px;font-weight:600}
    .panel{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;margin:14px 0;box-shadow:var(--shadow)}
    .grid-6{display:grid;grid-template-columns:repeat(6,minmax(0,1fr));gap:14px}
    @media (max-width:960px){.grid-6{grid-template-columns:repeat(3,1fr)}}
    @media (max-width:620px){.grid-6{grid-template-columns:repeat(2,1fr)} .hero h1{font-size:36px}}
    .sizeCard{background:#fff;border:1px solid var(--border);border-radius:14px;padding:14px;text-align:center}
    .sizeCard b{display:block;font-size:20px}
    .proof-grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:16px}
    @media (max-width:940px){.proof-grid{grid-template-columns:1fr}}
    .proof{padding:16px;border-radius:14px;border:1px solid var(--border);background:#fff}
    .filters{display:grid;grid-template-columns:220px 220px 1fr;gap:10px;align-items:center}
    @media (max-width:820px){.filters{grid-template-columns:1fr 1fr;grid-auto-rows:auto}}
    select,input[type=search]{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:12px;background:#fff}
    .cards{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:18px;margin-top:14px}
    @media (max-width:1020px){.cards{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:650px){.cards{grid-template-columns:1fr}}
    .card{background:#fff;border:1px solid var(--border);border-radius:18px;overflow:hidden;box-shadow:var(--shadow)}
    .imgbox{background:#fafafe;height:240px;display:flex;align-items:center;justify-content:center}
    .imgbox img{max-width:90%;max-height:90%;display:block}
    .meta{padding:14px}
    .meta h3{margin:0 0 6px;font-size:20px}
    .muted{color:var(--muted)}
    .chips{display:flex;flex-wrap:wrap;gap:8px;margin:10px 0}
    .chip{background:var(--chip);color:var(--chip-ink);padding:6px 10px;border-radius:999px;font-weight:600;font-size:12px}
    .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .kpi{background:#fff;border:1px dashed var(--border);padding:10px 12px;border-radius:10px}
    .footer{margin-top:24px;display:flex;gap:24px;flex-wrap:wrap;align-items:flex-start}
    .footPanel{flex:1;min-width:260px;padding:18px;border-radius:16px;background:#202433;color:#eaf0ff}
    .footPanel h3{margin:0 0 10px;color:#aeb8ff}
  </style>
</head>
<body>
<div class='hero'><div class='wrap'><h1>Marleen Molenaar Collection</h1><div id='totalsPill' class='pill'>Loading totals‚Ä¶</div></div></div>
<div class='wrap'>

  <div class='panel'><h3>üßµ Size Breakdown ‚Äî Pieces Available</h3><div id='sizeGrid' class='grid-6'></div></div>

  <div class='panel'><h3>üèÜ Verified Luxury Credentials & Proof Links</h3>
    <div class='proof-grid'>
      <div class='proof'><strong>Lane Crawford Luxury Retailer</strong><br><a href='https://www.lanecrawford.com/brand/700351/marleen-molenaar-sleepwear/women' target='_blank'>View Brand Page</a></div>
      <div class='proof'><strong>Retail Pricing Evidence</strong><br><a href='https://www.retykle.com/search?q=marleen%20molenaar' target='_blank'>Retykle Pricing Proof</a></div>
      <div class='proof'><strong>Media Coverage</strong><br><a href='https://www.scmp.com/article/533820/eastern-premise' target='_blank'>South China Morning Post</a></div>
    </div>
  </div>

  <div class='filters panel'>
    <select id='sizeFilter'><option value=''>All Sizes</option><option value='2'>Size 2</option><option value='4'>Size 4</option><option value='6'>Size 6</option><option value='8'>Size 8</option><option value='10'>Size 10</option><option value='12'>Size 12</option><option value='14'>Size 14</option></select>
    <select id='catFilter'><option value=''>All Categories</option><option>Children's</option><option>Sleep/Lounge (Unisex)</option><option>Ladies</option><option>Boys</option><option>Baby</option><option>Outerwear</option></select>
    <input id='search' type='search' placeholder='Search name, colour, description' />
  </div>

  <div id='cards' class='cards'></div>

  <div class='footer'>
    <div class='footPanel'><h3>Contact Information</h3>
      <p><strong>Gary Flax:</strong> +61 414 242 142<br><strong>Location:</strong> Vaucluse, Sydney NSW<br><strong>Viewing:</strong> Weekdays 5pm+, Weekends anytime<br><strong>Brand:</strong> Marleen Molenaar<br><strong>Access:</strong> Ground floor, driveway access for easy pickup</p>
    </div>
    <div class='footPanel'><h3>Collection Summary</h3>
      <p><span id='sumPieces'>‚Äî</span> pieces across <span id='sumSkus'>‚Äî</span> SKUs<br>Organised in <strong>50</strong> boxes for easy pickup</p>
      <div class='row'><div class='kpi'><strong>Wholesale:</strong> <span id='wholesaleTotal'>‚Äî</span></div><div class='kpi'><strong>Quick Sale:</strong> <span id='quickSaleTotal'>A$12,000.00</span></div></div>
    </div>
  </div>
</div>

<script>
const QUICK_SALE_TARGET = 12000;
const sizeCols = ["size2","size4","size6","size8","size10","size12","size14"];
const sizeLabel = {size2:"2",size4:"4",size6:"6",size8:"8",size10:"10",size12:"12",size14:"14"};
const fmtMoney = v => new Intl.NumberFormat('en-AU',{style:'currency',currency:'AUD'}).format(v||0);
const imgFallback = "images/placeholder.webp";

function makeSizeChips(r){return sizeCols.map(k=>{const n=+r[k]||0;return n?`<span class="chip">${sizeLabel[k]}√ó${n}</span>`:""}).join("")}

function applyFilters(rows){
  const size=document.getElementById('sizeFilter').value;
  const cat=document.getElementById('catFilter').value;
  const q=document.getElementById('search').value.trim().toLowerCase();
  return rows.filter(r=>{
    if(size){const k="size"+size;if(!(+(r[k]||0)))return false;}
    if(cat && r.category!==cat)return false;
    if(q){const hay=(r.item_name+" "+(r.description||"")+" "+(r.colour||"")).toLowerCase();if(!hay.includes(q))return false;}
    return true;
  });
}

function renderSizeBreakdown(rows){
  const t={2:0,4:0,6:0,8:0,10:0,12:0,14:0};
  rows.forEach(r=>{for(const s of [2,4,6,8,10,12,14])t[s]+=+r["size"+s]||0;});
  const g=document.getElementById("sizeGrid");
  g.innerHTML=[2,4,6,8,10,12,14].map(s=>`<div class="sizeCard"><b>Size ${s}</b><span class="muted">${t[s]} pieces</span></div>`).join("");
  const pieces=Object.values(t).reduce((a,b)=>a+b,0);
  document.getElementById("totalsPill").textContent=`${pieces} pieces ‚Ä¢ ${rows.length} SKUs ‚Ä¢ 50 boxes`;
  document.getElementById("sumPieces").textContent=pieces;
  document.getElementById("sumSkus").textContent=rows.length;
}

function renderCards(rows){
  const withScore=rows.map(r=>({...r,_img:r.image||imgFallback,_score:r.image?0:1}))
                     .sort((a,b)=>a._score-b._score||(a.item_name||"").localeCompare(b.item_name||""));
  document.getElementById("cards").innerHTML=withScore.map(r=>`
    <article class="card">
      <div class="imgbox"><img src="${r._img}" onerror="this.src='${imgFallback}'"></div>
      <div class="meta">
        <h3>${r.item_name||'‚Äî'}</h3>
        <div class="muted">${r.description||''}${r.colour?` ‚Ä¢ Colour: ${r.colour}`:''}</div>
        <div class="chips">${makeSizeChips(r)}</div>
        <div class="row"><div class="kpi"><strong>Qty:</strong> ${r.qty||0}</div>
        <div class="kpi"><strong>RRP:</strong> ${fmtMoney(r.rrp)||'‚Äî'}</div>
        <div class="kpi"><strong>Wholesale:</strong> ${fmtMoney(r.wholesale_price)||'‚Äî'}</div></div>
      </div>
    </article>`).join("");
  const wholesaleTotal=withScore.reduce((a,r)=>a+(+r.wholesale_price||0)*(+r.qty||0),0);
  document.getElementById("wholesaleTotal").textContent=fmtMoney(wholesaleTotal);
  document.getElementById("quickSaleTotal").textContent=fmtMoney(QUICK_SALE_TARGET);
}

function parseCSV(text){
  const lines=text.replace(/\r/g,'').split('\n').filter(Boolean);
  const head=lines.shift().split(',');
  return lines.map(l=>{
    const cells=l.split(',');const o={};
    head.forEach((h,i)=>o[h]=cells[i]||'');
    ["rrp","wholesale_price","size2","size4","size6","size8","size10","size12","size14","qty"].forEach(k=>o[k]=+o[k]||0);
    return o;
  });
}

async function load(){
  const res=await fetch('detailed_inventory.csv?cache='+Date.now());
  const data=parseCSV(await res.text());
  renderSizeBreakdown(data);
  renderCards(applyFilters(data));
  ["sizeFilter","catFilter","search"].forEach(id=>{
    document.getElementById(id).addEventListener('input',()=>renderCards(applyFilters(data)));
    document.getElementById(id).addEventListener('change',()=>renderCards(applyFilters(data)));
  });
}
load();
</script>
</body></html>
