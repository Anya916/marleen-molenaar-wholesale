<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Marleen Molenaar Collection ‚Äî Wholesale Catalogue</title>
<meta name="description" content="Premium children's & ladies' sleepwear wholesale catalogue ‚Äî Marleen Molenaar (all new with tags).">

<style>
  :root{ --purple1:#667eea; --purple2:#764ba2; --bg:#f6f5fb; --card:#fff; --ink:#1f1a33; --muted:#6f6486; --border:#e7e3f3; --chip:#efe9ff; }
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;background:var(--bg);color:var(--ink)}
  .hero{background:linear-gradient(135deg,var(--purple1),var(--purple2));color:#fff;text-align:center;padding:44px 16px 36px}
  .hero h1{margin:0 0 8px;font-size:44px;line-height:1.1;font-weight:800}
  .hero p{margin:0 0 16px;opacity:.95}
  .pill{display:inline-block;padding:10px 18px;border-radius:999px;background:rgba(255,255,255,.18);border:1px solid rgba(255,255,255,.35);font-weight:700}

  .wrap{max-width:1200px;margin:0 auto;padding:0 16px}
  .panel{background:var(--card);border:1px solid var(--border);border-radius:14px;margin:18px 0;padding:16px;box-shadow:0 2px 10px rgba(0,0,0,.06)}
  .panel h3{margin:0 0 10px;color:#2a1a47}

  .size-tiles{display:grid;grid-template-columns:repeat(auto-fit,minmax(130px,1fr));gap:12px}
  .size-tile{background:#f4f0ff;border:1px solid var(--border);border-radius:12px;padding:14px;text-align:center}
  .size-tile b{display:block;font-size:22px;color:#2a1a47}
  .size-tile span{display:block;font-size:13px;color:var(--muted);margin-top:4px}

  .proof{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px}
  .proof-card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:14px}
  .proof-card h4{margin:0 0 6px;color:#2a1a47}
  .proof-card a{color:#1a5cff;text-decoration:none;font-weight:600}
  .proof-card p{margin:6px 0 0;color:#6d5e85;font-size:14px}

  .filters{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:16px;margin:18px 0}
  .row{display:flex;gap:10px;flex-wrap:wrap}
  .filters input,.filters select{padding:8px 10px;border:1px solid var(--border);border-radius:10px;background:#fff;min-width:200px}
  .filters .meta{margin-top:10px;color:var(--muted);font-size:14px;display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap}

  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:14px;margin-bottom:28px}
  .card{background:#fff;border:1px solid var(--border);border-radius:12px;overflow:hidden;box-shadow:0 2px 10px rgba(0,0,0,.06)}
  .imgbox{height:180px;background:#fff;border-bottom:1px solid #eee;display:flex;align-items:center;justify-content:center;overflow:hidden}
  .imgbox img{max-width:100%;max-height:100%;object-fit:contain;width:auto;height:auto;background:#fff}
  .placeholder{font-size:14px;color:#999;text-align:center}
  .body{padding:12px}
  .title{font-weight:800;color:#2a1a47;margin:0 0 6px}
  .muted{color:#6d5e85;font-size:13px}
  .sizes{margin-top:4px}
  .sizes span{background:#f4f0ff;border:1px solid #dccfff;border-radius:6px;padding:2px 6px;margin:2px;display:inline-block;font-size:12px}
  .price-line{display:flex;gap:10px;flex-wrap:wrap;margin-top:6px}
  .tag{background:#f4f0ff;border:1px solid #dccfff;border-radius:6px;padding:2px 8px;font-size:12px}

  .footer{background:#1f1640;color:#fff}
  .footer-inner{max-width:1200px;margin:0 auto;padding:22px 16px;display:flex;flex-wrap:wrap;gap:22px;justify-content:space-between}
  .footer h4{margin:0 0 8px}
  .footer a{color:#fff;text-decoration:none}
  .fine{color:#c9c4e6;font-size:13px}

  .note{color:#8a7eb8;font-size:13px;margin-top:6px}
</style>
</head>
<body>

<!-- HERO -->
<section class="hero">
  <div class="wrap">
    <h1>Marleen Molenaar Collection</h1>
    <p>Premium Children‚Äôs & Ladies‚Äô Sleepwear ‚Äî Wholesale Catalogue</p>
    <div class="pill" id="hero-pill">Loading totals‚Ä¶</div>
  </div>
</section>

<div class="wrap">

  <!-- SIZE BREAKDOWN -->
  <div class="panel" id="sizes-panel">
    <h3>üßµ Size Breakdown ‚Äî Pieces Available</h3>
    <div class="size-tiles" id="size-tiles"></div>
    <div class="note" id="size-note" style="display:none">
      Showing total pieces only (this CSV doesn‚Äôt include per-size counts). If you later upload the per-size sheet, this section will auto-populate sizes 2‚Äì14.
    </div>
  </div>

  <!-- PROOF LINKS -->
  <div class="panel">
    <h3>üèÜ Verified Luxury Credentials & Proof Links</h3>
    <div class="proof">
      <div class="proof-card">
        <h4>Lane Crawford Luxury Retailer</h4>
        <a href="https://www.lanecrawford.com/brand/700351/marleen-molenaar-sleepwear/women" target="_blank" rel="noopener">View Brand Page</a>
        <p>Hong Kong‚Äôs premier luxury department store ‚Äî equivalent to Harrods. Establishes brand positioning.</p>
      </div>
      <div class="proof-card">
        <h4>Retail Pricing Evidence</h4>
        <a href="https://retykle.com/products/marleen-molenaar-pyjama-set-2-8y" target="_blank" rel="noopener">Retykle Pricing Proof</a>
        <p>Shows premium retail/resale pricing for individual pieces.</p>
      </div>
      <div class="proof-card">
        <h4>Media Coverage</h4>
        <a href="https://www.scmp.com/article/533820/eastern-premise" target="_blank" rel="noopener">South China Morning Post</a>
        <p>2006 profile: ‚Äúrunning a children‚Äôs clothing design company under her own name.‚Äù</p>
      </div>
    </div>
  </div>

  <!-- FILTERS -->
  <div class="filters">
    <div class="row">
      <select id="catSel"><option value="">All Categories</option></select>
      <input id="q" placeholder="Search name, colour, description‚Ä¶" />
    </div>
    <div class="meta">
      <div>Showing <b id="visible-count">0</b> items</div>
      <div class="muted" id="diag">Loaded detailed_inventory.csv ‚Ä¢ headers: SKU | Brand | Item_Name | Description | Category | Size | Colour | Qty | Anchor_Price</div>
    </div>
  </div>

  <!-- PRODUCT GRID -->
  <div class="grid" id="grid"></div>
</div>

<!-- FOOTER -->
<footer class="footer">
  <div class="footer-inner">
    <div>
      <h4>Contact</h4>
      <p><strong>Gary Flax:</strong> <a href="tel:+61414242142">+61 414 242 142</a></p>
      <p><strong>Location:</strong> Vaucluse, Sydney NSW</p>
      <p><strong>Viewing:</strong> Weekdays 5pm+, Weekends anytime</p>
      <p><strong>Brand:</strong> Marleen Molenaar</p>
      <p class="fine">All items new with original manufacturer tags.</p>
    </div>
    <div>
      <h4>Collection Summary</h4>
      <p id="sum-pieces">‚Äî pieces</p>
      <p id="sum-skus">‚Äî SKUs</p>
      <p id="sum-rrp">Total RRP: ‚Äî AUD</p>
      <p><strong id="sum-wholesale">Wholesale (target): $20,000 AUD</strong></p>
      <p><strong id="sum-quick">Quick Sale (target): $12,000 AUD</strong></p>
    </div>
  </div>
</footer>

<!-- Papa Parse -->
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<script>
/* ==== CONFIG (same targets as your footer card) ==== */
const WHOLESALE_TOTAL_TARGET_AUD = 20000;
const QUICKSALE_TOTAL_TARGET_AUD  = 12000;

/* ==== IMAGE MAPPING (from your notes image1‚Ä¶image33) ==== */
const IMG = name => `images/${name}`;
const IMAGE_RULES = [
  {img:IMG('image1_small.jpg'),  match:['ella','princess','gown','pink']},
  {img:IMG('image2_small.jpg'),  match:['cora','sleeveless','short','flower','blue']},
  {img:IMG('image3_small.jpg'),  match:['cora','sleeveless','short','flower','pink']},
  {img:IMG('image4_small.jpg'),  match:['ava','singlet','green','yellow']},
  {img:IMG('image5_small.jpg'),  match:['harper','shorts','vest']},
  {img:IMG('image6_small.jpg'),  match:['ruby','boob','tube','shorts']},
  {img:IMG('image7_small.jpg'),  match:['ella','semi','pj']},
  {img:IMG('image8_small.jpg'),  match:['grace','night','1 bow','off white']},
  {img:IMG('image9_small.jpg'),  match:['isabella','nightdress','no collar']},
  {img:IMG('image10_small.jpg'), match:['mia','shirt','ls']},
  {img:IMG('image11_small.jpg'), match:['suzy','ls','pink']},
  {img:IMG('image12_small.jpg'), match:['suzy','pink']},
  {img:IMG('image13_small.jpg'), match:['suzy','pink']},
  {img:IMG('image14_small.jpg'), match:['charlotte','suzy','light blue']},
  {img:IMG('image15_small.jpg'), match:['eliana','lemon','flowers']},
  {img:IMG('image16_small.jpg'), match:['cora','nighty','sleeveless','flower','blue']},
  {img:IMG('image17_small.jpg'), match:['jack','boys','blue top','brown pants']},
  {img:IMG('image18_small.jpg'), match:['oliver','long','black','check']},
  {img:IMG('image19_small.jpg'), match:['thomas','short','grey','blue']},
  {img:IMG('image20_small.jpg'), match:['maisie','baby']},
  {img:IMG('image21_small.jpg'), match:['olivia','girls','long','pj']},
  {img:IMG('image22_small.jpg'), match:['aria','ladies','long','pj']},
  {img:IMG('image23_small.jpg'), match:['layla','ladies','short','pj','sleeveless']},
  {img:IMG('image24_small.jpg'), match:['layla','short','night']},
  {img:IMG('image25_small.jpg'), match:['sophia','women','shirt']},
  {img:IMG('image26_small.jpg'), match:['summer','dressing','gown']},
  {img:IMG('image27_small.jpg'), match:['maya','gown','leopard']},
  {img:IMG('image28_small.jpg'), match:['josh','gown','check']},
  {img:IMG('image29_small.jpg'), match:['jack','gown','brown']},
  {img:IMG('image30_small.jpg'), match:['fireman','raincoat','no hat','yellow']},
  {img:IMG('image31_small.jpg'), match:['candy','raincoat','hat','pink']},
  {img:IMG('image32_small.jpg'), match:['candy','raincoat','no hat','pink']},
  {img:IMG('image33_small.jpg'), match:['fireman','raincoat','hat','yellow']},
];
const PLACEHOLDER = IMG('placeholder.webp');

/* ==== helpers ==== */
const money = n => isFinite(n)?'$'+n.toLocaleString('en-AU',{maximumFractionDigits:0}):'‚Äî';
const num = v => {
  if(v==null) return 0;
  const s = String(v).replace(/[^0-9.\-]/g,'');
  const n = parseFloat(s);
  return isFinite(n)?n:0;
};
const norm = s => (s||'').toString().toLowerCase();

function guessImage(row){
  const hay = `${norm(row.Item_Name)} ${norm(row.Description)} ${norm(row.Colour)}`;
  for(const r of IMAGE_RULES){
    if(r.match.every(m => hay.includes(m))) return r.img;
  }
  return PLACEHOLDER;
}

/* ==== render ==== */
const grid = document.getElementById('grid');
const sizeTiles = document.getElementById('size-tiles');
const sizeNote  = document.getElementById('size-note');
const heroPill  = document.getElementById('hero-pill');
const sumPieces = document.getElementById('sum-pieces');
const sumSkus   = document.getElementById('sum-skus');
const sumRRP    = document.getElementById('sum-rrp');
const sumWholesale = document.getElementById('sum-wholesale');
const sumQuick     = document.getElementById('sum-quick');
const visibleCount = document.getElementById('visible-count');
const catSel = document.getElementById('catSel');
const q = document.getElementById('q');

/* read CSV */
Papa.parse('detailed_inventory.csv', {
  download:true, header:true, skipEmptyLines:true,
  complete: res => {
    let rows = res.data.map(r => ({
      SKU: (r.SKU||'').trim(),
      Brand: (r.Brand||'').trim(),
      Item_Name: (r.Item_Name||'').trim(),
      Description: (r.Description||'').trim(),
      Category: (r.Category||'').trim(),
      Size: (r.Size||'').trim(),
      Colour: (r.Colour||'').trim(),
      Qty: num(r.Qty),
      RRP: num(r.RRP || r.Anchor_Price),
      Discounted: num(r.Discounted_Price)
    })).filter(r => r.Item_Name);

    if(!rows.length){
      heroPill.textContent = 'No items loaded ‚Äî check CSV headers.';
      return;
    }

    /* totals */
    const totalPieces = rows.reduce((a,b)=>a + (b.Qty||0), 0);
    const totalSkus   = rows.length;
    const totalRRP    = rows.reduce((a,b)=>a + (b.RRP||0)*(b.Qty||0), 0);

    /* pricing factors (per-item) so sums hit targets */
    const wholesaleFactor = totalRRP ? (WHOLESALE_TOTAL_TARGET_AUD / totalRRP) : 0;
    const quickFactor     = totalRRP ? (QUICKSALE_TOTAL_TARGET_AUD  / totalRRP) : 0;

    /* counters */
    heroPill.textContent = `${totalPieces.toLocaleString()} pieces ‚Ä¢ ${totalSkus.toLocaleString()} SKUs`;
    sumPieces.textContent = `${totalPieces.toLocaleString()} pieces`;
    sumSkus.textContent   = `${totalSkus.toLocaleString()} SKUs`;
    sumRRP.textContent    = `Total RRP: ${money(totalRRP)}`;
    sumWholesale.textContent = `Wholesale (target): ${money(WHOLESALE_TOTAL_TARGET_AUD)}`;
    sumQuick.textContent     = `Quick Sale (target): ${money(QUICKSALE_TOTAL_TARGET_AUD)}`;

    /* categories for filter */
    const cats = [...new Set(rows.map(r=>r.Category).filter(Boolean))].sort();
    cats.forEach(c => {
      const o = document.createElement('option');
      o.value=c; o.textContent=c;
      catSel.appendChild(o);
    });

    /* size tiles: if per-size columns are NOT present, show one total tile + note */
    const hasPerSize = false; // this CSV has no per-size numeric columns
    sizeTiles.innerHTML = '';
    if(!hasPerSize){
      sizeNote.style.display = 'block';
      const div = document.createElement('div');
      div.className='size-tile';
      div.innerHTML = `<b>All sizes</b><span>${totalPieces.toLocaleString()} pieces</span>`;
      sizeTiles.appendChild(div);
    }

    /* render cards */
    function render(){
      const term = norm(q.value);
      const cat  = catSel.value;
      let filtered = rows.filter(r => {
        if(cat && r.Category!==cat) return false;
        if(term){
          const hay = `${r.SKU} ${r.Item_Name} ${r.Description} ${r.Colour} ${r.Category}`;
          if(!norm(hay).includes(term)) return false;
        }
        return true;
      });

      grid.innerHTML='';
      filtered.forEach(r => {
        const imgSrc = guessImage(r);
        const wholesaleEach = Math.max(1, Math.round((r.RRP||0) * wholesaleFactor));
        const quickEach     = Math.max(1, Math.round((r.RRP||0) * quickFactor));

        const card = document.createElement('div');
        card.className='card';
        card.innerHTML = `
          <div class="imgbox">
            <img src="${imgSrc}" alt="${r.Item_Name}" onerror="this.src='images/placeholder.webp'"/>
          </div>
          <div class="body">
            <div class="title">${r.Item_Name}</div>
            <div class="muted">${r.Description || '‚Äî'}</div>
            <div class="muted">Colour: ${r.Colour || '‚Äî'} ¬∑ SKU: ${r.SKU || '‚Äî'}</div>
            <div class="sizes">
              <span>Qty: ${r.Qty||0}</span>
              <span>Size: ${r.Size||'Mixed'}</span>
            </div>
            <div class="price-line">
              <span class="tag">RRP: ${money(r.RRP||0)}</span>
              <span class="tag">Wholesale(each): ${money(wholesaleEach)}</span>
              <span class="tag">Quick(each): ${money(quickEach)}</span>
            </div>
          </div>
        `;
        grid.appendChild(card);
      });

      visibleCount.textContent = filtered.length;
    }

    q.addEventListener('input',render);
    catSel.addEventListener('change',render);
    render();
  },
  error: () => {
    document.getElementById('hero-pill').textContent = 'Error loading products. Please check detailed_inventory.csv';
  }
});
</script>
</body>
</html>
